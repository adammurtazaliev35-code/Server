from flask import Flask, request, jsonify
import os

app = Flask(__name__)

# –ü—Ä–æ—Å—Ç–æ–π –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã–π —á–∞—Ç-–±–æ—Ç
def get_ai_response(message):
    message_lower = message.lower()
    
    # –ë–∞–∑–æ–≤—ã–µ –æ—Ç–≤–µ—Ç—ã
    if any(word in message_lower for word in ['–ø—Ä–∏–≤–µ—Ç', '–∑–¥—Ä–∞–≤—Å—Ç–≤—É–π', 'hello', 'hi']):
        return "–ü—Ä–∏–≤–µ—Ç! –Ø –≤–∞—à –ò–ò –ø–æ–º–æ—â–Ω–∏–∫! ü§ñ –ß–µ–º –º–æ–≥—É –ø–æ–º–æ—á—å?"
    
    elif any(word in message_lower for word in ['–∫–∞–∫ –¥–µ–ª–∞', '–∫–∞–∫ —Ç—ã', '–∫–∞–∫ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ']):
        return "–£ –º–µ–Ω—è –≤—Å—ë –æ—Ç–ª–∏—á–Ω–æ! –ì–æ—Ç–æ–≤ –ø–æ–º–æ–≥–∞—Ç—å –≤–∞–º! ‚ú®"
    
    elif any(word in message_lower for word in ['—Å–ø–∞—Å–∏–±–æ', '–±–ª–∞–≥–æ–¥–∞—Ä—é']):
        return "–ü–æ–∂–∞–ª—É–π—Å—Ç–∞! –í—Å–µ–≥–¥–∞ —Ä–∞–¥ –ø–æ–º–æ—á—å! üòä"
    
    elif any(word in message_lower for word in ['–ø–æ–∫–∞', '–¥–æ —Å–≤–∏–¥–∞–Ω–∏—è', '–ø—Ä–æ—â–∞–π']):
        return "–î–æ —Å–≤–∏–¥–∞–Ω–∏—è! –í–æ–∑–≤—Ä–∞—â–∞–π—Ç–µ—Å—å —Å –Ω–æ–≤—ã–º–∏ –≤–æ–ø—Ä–æ—Å–∞–º–∏! üëã"
    
    elif any(word in message_lower for word in ['–ø–æ–º–æ—â—å', '–∫–æ–º–∞–Ω–¥—ã', '—á—Ç–æ —Ç—ã —É–º–µ–µ—à—å']):
        return """–Ø –º–æ–≥—É:
‚Ä¢ üí¨ –û–±—â–∞—Ç—å—Å—è –∏ –æ—Ç–≤–µ—á–∞—Ç—å –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã
‚Ä¢ üìù –ü–æ–º–æ–≥–∞—Ç—å —Å —Ç–µ–∫—Å—Ç–æ–º –∏ –∏–¥–µ—è–º–∏
‚Ä¢ üéØ –î–∞–≤–∞—Ç—å —Å–æ–≤–µ—Ç—ã –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
‚Ä¢ üîç –û—Ç–≤–µ—á–∞—Ç—å –Ω–∞ —Ä–∞–∑–ª–∏—á–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã

–ü—Ä–æ—Å—Ç–æ –Ω–∞–ø–∏—à–∏—Ç–µ –º–Ω–µ —á—Ç–æ-–Ω–∏–±—É–¥—å!"""
    
    elif any(word in message_lower for word in ['–∫—Ç–æ —Ç—ã', '—Ç–≤–æ–µ –∏–º—è', '–ø—Ä–µ–¥—Å—Ç–∞–≤—å—Å—è']):
        return "–Ø - AI Assistant, –≤–∞—à –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–π –ø–æ–º–æ—â–Ω–∏–∫! –°–æ–∑–¥–∞–Ω, —á—Ç–æ–±—ã –ø–æ–º–æ–≥–∞—Ç—å —Å —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ –∑–∞–¥–∞—á–∞–º–∏. ü§ñ"
    
    elif '?' in message:
        return f"–ò–Ω—Ç–µ—Ä–µ—Å–Ω—ã–π –≤–æ–ø—Ä–æ—Å! '{message}'. –ö–∞–∫ –ò–ò –ø–æ–º–æ—â–Ω–∏–∫, —è —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä—É—é—Å—å –Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–µ —Ç–µ–∫—Å—Ç–∞ –∏ –ø–æ–º–æ—â–∏ —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π. –ú–æ–≥—É –ø—Ä–µ–¥–ª–æ–∂–∏—Ç—å –ø–æ–º–æ—â—å —Å –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–µ–π –º—ã—Å–ª–µ–π –∏–ª–∏ –æ—Ç–≤–µ—Ç–∏—Ç—å –Ω–∞ –¥—Ä—É–≥–∏–µ –≤–æ–ø—Ä–æ—Å—ã!"
    
    else:
        return f"–í—ã —Å–∫–∞–∑–∞–ª–∏: '{message}'. –°–ø–∞—Å–∏–±–æ –∑–∞ —Å–æ–æ–±—â–µ–Ω–∏–µ! –Ø –≤–∞—à –ò–ò –ø–æ–º–æ—â–Ω–∏–∫, –≥–æ—Ç–æ–≤—ã–π –ø–æ–º–æ—á—å —Å —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ –∑–∞–¥–∞—á–∞–º–∏. –ß–µ–º –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ –º–æ–≥—É –±—ã—Ç—å –ø–æ–ª–µ–∑–µ–Ω? üí´"

@app.route('/api/chat', methods=['POST'])
def chat():
    try:
        data = request.get_json()
        message = data.get('message', '')
        
        if not message:
            return jsonify({"error": "–°–æ–æ–±—â–µ–Ω–∏–µ –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º"}), 400
        
        response = get_ai_response(message)
        return jsonify({"response": response})
        
    except Exception as e:
        return jsonify({"error": f"–û—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞: {str(e)}"}), 500

@app.route('/')
def home():
    return jsonify({
        "message": "AI Chat Server is running!",
        "status": "active",
        "endpoint": "POST /api/chat",
        "example": {"message": "–ü—Ä–∏–≤–µ—Ç!"}
    })

if __name__ == '__main__':
    port = int(os.environ.get('PORT', 5000))
    app.run(host='0.0.0.0', port=port)
